<!-- Upload Image -->
<div class="uploadDiv" style=" text-align: center;" *ngIf="cloudUpload">
  <img (change)=" onSelectFile($event)" mat-button mat-dialog-close style="margin-left: 90%; margin-top: 15px;"
    src="../../assets/images/cancel.png" height="20" width="20" alt="">
  <img style="margin: 18% 0% 4%  0%" src="../../assets/images/cloud.png" height="160" width="180" alt="">
  <!-- <mat-progress-bar mode="determinate" value="40"></mat-progress-bar> -->
  <h4 style=" text-align: center; color: rgb(97, 97, 96); margin-bottom: 10%;">Drop photo from Device to Upload</h4>

  <input (change)=" onSelectFile($event)" multiple type="file" accept="image/png, image/gif, image/jpeg" class="file"
    #file><br>
  <button style="padding:  10px 15px; background-color: rgb(0, 132, 255); color: white ; font-size: 18px;"
    mat-flat-button (click)="file.click()">Upload From Device </button>
</div>

<div class="uploadDiv" style=" text-align: center;" *ngIf="cancelFileUpload">

  <img style="margin: 15% 0% 4%  0%" src="../../assets/images/question.png" height="210" width="130" alt="">
  <h4 style="padding-bottom: 4%; text-align: center; color: rgb(137, 137, 135); font-size: 20px ;">Do you Really want to
    discard Uploading</h4>
  <button
    style="border-radius: 5px; padding:  5px 20px; background-color: rgb(0, 132, 255); color: white ; font-size: 18px;"
    mat-flat-button (click)="home()">Discard Process </button>
  <br>
  <button
    style="margin-bottom:2%; padding:  10px 15px ; background-color: rgb(249, 251, 252); color: rgb(0, 132, 255);; font-size: 18px;"
    mat-flat-button (click)="showPreview()">Cancel </button>

</div>


<div *ngIf="preview">
  <div style="display: flex;">
    <img (click)="cancelUpload()" style=" margin: 15px 7px;" src="../../assets/images/backtoUpload.png" height="20"
      width="20" alt="">
      <h3 (click)="showaddcomment()" style="cursor: pointer;  margin-left:80% !important;"> Next</h3>
    <!-- <button style=" margin-left:80% !important;" mat-button (click)="showaddcomment()"> Next</button> -->
  </div>
  <div class="container">
    <carousel #mainCarousel mat-card-image style="z-index: 0 !important; margin: 0.001px !important;"
      *ngIf="multiples.length!=1" [images]="multiples" [objectFit]="'cover'" [cellWidth]="'100%'" [height]="620"
      [width]="580" [cellsToScroll]="a" [autoplay]="true" [dots]="false" [loop]="true" [transitionDuration]="250"
      [counter]="true" [cellsToShow]="1">
    </carousel>
    <img class="images" *ngIf="(multiples.length==1)" src={{multiples[0].path}} height="600" width="560" alt="">

    <!-- <button *ngIf="temp!=multiples.length-1" class="btnRight"  style="margin-left: 11%;" (click)="inc()"><img src="../../assets/images/next.png"
        style="max-height: 12px; max-width: 12px;" alt=""></button>-->
    <div *ngIf="showGrid" class="btncar">
      <!-- <carousel  style="z-index: 0 !important; " (click)="cross($event)"
				[images]="multiples"
				[height]="150"
        [width]="560"
        [height]="120"
				[cellsToShow]="4">
   			</carousel> -->
      <carousel #myCarousel class="carousel-html-content" style="width:540px; height: 100px; z-index: 0 !important;"
        [arrows]="false" [cellsToShow]="4">
        <ng-container *ngFor="let multiple of multiples; index as i; ">

          <div (click)="select(i)" class="carousel-cell" style="margin: 0 15px 0 0px; max-width: 110px; "
            style="background-image: url({{multiple.path}}) ; background-position: center;  background-repeat: no-repeat; background-size: cover; ">
            <!-- <img   class="carousel-cell" (click)="cross($event)" style="position:absolute;"  src={{multiple.path}}  alt=""> -->
            <img
              style="cursor: pointer; padding: 3px; left: 84%; height: 17px; width:17px; background-color: rgba(6, 3, 3, 0.5); color: white; max-height: 20px !important; border-radius: 8px;"
              (click)="cross($event)" src="../../assets/images/cancel.png" alt="">

          </div>
        </ng-container>
        <div class="carousel-cell" style="background-color: white;">
          <img (click)="files.click()" style="padding: 30%  !important;" src="../../assets/images/camera.png" alt="">
        </div>
      </carousel>

      <img class="next" (click)="next()" src="../../assets/images/next2.png" height="24px" width="24px" alt="">
      <img class="prev" (click)="previous()" src="../../assets/images/prev2.png" height="24px" width="24px" alt="">


    </div>
    <button class="btnimg" (click)="showGrid=showGrid?false:true" style="margin-left: 13%;"><img
        src="../../assets/images/photos.png" height="40" width="40" alt=""></button>
    <!-- <img class="btnLeft"   height="20" width="20" alt=""> -->
  </div>
</div>
<!-- submit Image with Comment -->
<ng-container *ngIf="addcomment">


  <h3 (click)="addPost()" style="cursor: pointer;"> Upload</h3>

  <!-- <swiper [navigation]="true" class="mySwiper">
  <ng-template swiperSlide>Slide 1</ng-template
  ><ng-template swiperSlide>Slide 2</ng-template
  ><ng-template swiperSlide>Slide 3</ng-template
  ><ng-template swiperSlide>Slide 4</ng-template
  ><ng-template swiperSlide>Slide 5</ng-template
  ><ng-template swiperSlide>Slide 6</ng-template
  ><ng-template swiperSlide>Slide 7</ng-template
  ><ng-template swiperSlide>Slide 8</ng-template
  ><ng-template swiperSlide>Slide 9</ng-template>
</swiper> -->


  <div class="flex">

    <carousel mat-card-image style="z-index: 0 !important; margin: 0.001px !important; " *ngIf="multiples.length!=1"
      [images]="multiples" [objectFit]="'cover'" [cellWidth]="'100%'" [height]="620" [width]="580" [autoplay]="true"
      [dots]="false" [loop]="true" [counter]="true" [cellsToShow]="1">
    </carousel>
    <img class="images" *ngIf="(multiples.length==1)" src={{multiples[0].path}} height="600" width="560" alt="">

    <!-- <div class="container"> -->
    <!-- <img class="images" *ngIf="!(multiples.length)" src={{imageUrl}} height="600" width="560" alt=""> -->
    <!-- <button *ngIf="temp!=multiples.length-1" class="btnRight" (click)="inc()"><img src="../../assets/images/next.png"
          style="max-height: 12px; max-width: 12px;" alt=""></button>
      <button *ngIf="temp!=0" class="btnLeft" (click)="dec()"><img src="../../assets/images/back.png"
          style="max-height: 12px; max-width: 12px;" alt=""></button> -->
    <!-- <button  [disabled]= "!multiples.length" class="material-icons round"  style="color: red;" (click)="del()">delete</button> -->
    <!-- </div> -->
    <mat-card class="example-card">

      <mat-card-content>
        <form>
          <div class="flex">
            <ngx-avatar name="{{currentUser.name}}" src="{{imgBaseUrl+currentUser?.photo}}" size="45"></ngx-avatar>
            <h5 style="font-size: 16px; margin-top: 10px; margin-left: 20px !important; ">{{currentUser.name}}</h5>
          </div>
          <mat-form-field style="width:98%" appearance="standard">
            <mat-label>Write a Caption</mat-label>
            <textarea rows="12" matInput name="emojiCaption" [(ngModel)]="emojiCaption" required></textarea>



            <!-- <i (click)="toggled = !toggled" [(emojiPickerIf)]="toggled" [emojiPickerDirection]="'top' " (emojiPickerSelect)="handleSelection($event)"><img src="../../assets/images/emoji.png" style="cursor: pointer; padding-top: 13px; max-height: 35px; max-width: 25px" alt=""></i>  -->
            <div style="display:flex">

              <img src="../../assets/images/emoji_blur.png" mat-button [matMenuTriggerFor]="aboveMenu"
                style="cursor: pointer; padding-top: 12px; max-height: 35px; max-width: 28px" alt="">
              <p style="padding-top: 12px;  margin-left: 83%; font-size: 16px; color: rgb(95, 96, 96);">
                {{emojiCaption.length}}/2000 </p>
            </div>

            <mat-menu #aboveMenu="matMenu" yPosition="above">

              <!-- <i  (click)="toggled = !toggled" [(emojiPickerIf)]="toggled" [emojiPickerDirection]="'top' " (emojiPickerSelect)="handleSelection($event)"></i> -->

              <emoji-mart (click)="$event.stopPropagation();" title="Pick your emojiâ€¦" emoji="point_up"
                (emojiClick)="handleSelection($event)"></emoji-mart>
            </mat-menu>
          </mat-form-field>

          <mat-form-field style="width:98%" appearance="standard">
            <mat-label>Enter Location</mat-label>

            <input matInput ngx-google-places-autocomplete name="location" [(ngModel)]="location"
              #placesRef="ngx-places" (onAddressChange)="handleAddressChange($event)" />

            <mat-icon matSuffix> <img src="../../assets/images/location.png"
                style="cursor: pointer; margin-right: 10px; max-height: 35px; max-width: 25px" alt=""></mat-icon>

          </mat-form-field>
          <mat-form-field style="width:98%" appearance="standard" (click)="files.click()">
            <mat-label>Add Photos</mat-label>

            <input disabled matInput placeholder="pat@example.com">
            <mat-icon matSuffix> <img src="../../assets/images/camera_blur.png"
                style="cursor: pointer;  max-height: 35px; max-width: 25px" alt=""></mat-icon>



          </mat-form-field>


          <!-- <button class="save" type="submit" mat-flat-button color="primary" (click)="addPost()"  >Save User </button> -->
        </form>



      </mat-card-content>

    </mat-card>
  </div>

</ng-container>


<div class="uploadDiv" style=" text-align: center;" *ngIf="savePost">
  <img mat-button mat-dialog-close style="margin-left: 90%; margin-top: 15px;" src="../../assets/images/cancel.png"
    height="20" width="20" alt="">
  <img style="margin: 18% 0% 4%  0%" src="../../assets/images/cloud.png" height="160" width="180" alt="">
  <h4 style="padding-bottom: 10%; text-align: center; color: rgb(97, 97, 96);">Just set on place, images begin upload
  </h4>
  <mat-progress-bar mode="determinate" value="{{time*33}}"></mat-progress-bar>
  <button style="padding:  10px 15px; background-color: rgb(250, 251, 252); color: rgb(0, 132, 255) ; font-size: 18px;"
    mat-flat-button>Uploading... </button>
</div>
<input style="display: none;" (change)=" onSelectFile($event)" multiple type="file"
  accept="image/png, image/gif, image/jpeg" hidden #files>